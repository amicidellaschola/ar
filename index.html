<!DOCTYPE html>
<html>
  <script>
    window.onload = function () {
      // document
      //   .querySelector(".say-hi-button")
      //   .addEventListener("click", function () {
      //     // here you can change also a-scene or a-entity properties, like
      //     // changing your 3D model source, size, position and so on
      //     // or you can just open links, trigger actions...
      //     alert("Hi there!");
      //   });

      // const distanceMsg = document.querySelector('[gps-projected-entity-place]').getAttribute('distanceMsg');
      // console.log(distanceMsg);
    };
    
    function getLocation(callback) {
      if (navigator.geolocation) {
        var lat_lng = navigator.geolocation.getCurrentPosition(function(position){
          console.log(position);
            var user_position = {};
            user_position.lat = position.coords.latitude; 
            user_position.lng = position.coords.longitude; 
            callback(user_position);
          });
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }
      
      getLocation(function(lat_lng){
        console.log(lat_lng);
        // cucina:
        // chrome: latitude: 45.824416899999996; longitude: 8.772914799999999
        // googlemaps: latitude: 45.8222430496054; longitude: 8.767731449170162
      });

      // other events:
      // - camera-init
      window.addEventListener('gps-camera-origin-coord-set', e => {
        console.log("gps-camera-origin-coord-set", e);
      });
  </script>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    .buttons {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 5em;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .say-hi-button {
      padding: 0.25em;
      border-radius: 4px;
      border: none;
      background: white;
      color: black;
      width: 4em;
      height: 2em;
    }
  </style>
  <body style="margin : 0px; overflow: hidden;">
    <!-- <a-marker preset="hiro">
      <a-entity
        position="0 0 0"
        scale="0.05 0.05 0.05"
        gltf-model="https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/scene.gltf"
      ></a-entity>
    </a-marker>
    <a-entity camera></a-entity> -->
    <!-- <a-scene
      vr-mode-ui="enabled: true"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: true;"
    >
      <a-camera
        rotation-reader
        id='camera1'
        look-controls-enabled='false'
        arjs-look-controls='smoothingFactor: 0.1'
        gps-camera='gpsMinDistance: 0.2'
      ></a-camera>
      <a-box color="yellow" gps-entity-place="latitude: 45.8222430496054; longitude: 8.767731449170162" position="0 30 0"/>
    </a-scene> -->
    <a-scene
      embedded
      arjs='videoTexture: true; debugUIEnabled: false;'
      renderer='antialias: true; alpha: true'
    >
      <a-camera gps-camera rotation-reader gps-camera-position gps-camera-rotation gps-camera-debug></a-camera>
      <!-- <a-box gps-entity-place='latitude: 45.824416899999996; longitude: 8.772914799999999;' material='color: red' scale='1 1 1'></a-box> -->
      <a-box
        data-place="olmo"
        gps-entity-place="latitude: 45.82197; longitude: 8.76832;"
        material='color: blue'
        scale='300 300 300'
      ></a-box>
      <a-sphere
        data-place="stagno-out-north"
        gps-entity-place="latitude: 45.82181; longitude: 8.76792;"
        radius="150"
        color="yellow"
      ></a-sphere>
      <a-sphere
        data-place="aiuola-fiori"
        gps-entity-place="latitude: 45.82185; longitude: 8.76774;"
        radius="50"
        color="green"
      ></a-sphere>
      <a-box
        data-place="falÃ²"
        gps-entity-place="latitude: 45.82205; longitude: 8.76739;"
        material='color: red'
        look-at="[gps-camera]"
        scale='100 100 100'
      ></a-box>
      <a-sphere
        data-place="pollaio"
        gps-entity-place="latitude: 45.82213; longitude: 8.76712;"
        radius="300"
        color="black"
      ></a-sphere>
      <a-text
        data-place="spirale-aromatiche"
        gps-entity-place="latitude: 45.82216; longitude: 8.76726;"
        value="Spirale aromatiche"
        look-at="[gps-camera]"
        scale="500 500 40"
      ></a-text>
      <a-text
        data-place="ingresso-davanti-siepe"
        gps-entity-place="latitude: 45.82224; longitude: 8.76751;"
        value="LaSchola"
        scale="200 200 200"
        ></a-text>
      <a-text
        data-place="prato-biblioteca"
        gps-entity-place="latitude: 45.82208; longitude: 8.76809;"
        value="Bihospitalis"
        look-at="[gps-camera]"
        scale="300 300 150"
      ></a-text>
      <!-- <a-sphere gps-entity-place="latitude: 45.824416899999996; longitude: 8.772914799999999;" radius=2 color=green></a-sphere> -->
    </a-scene>
  </body>
</html>